# Log rotation for Caddy and form handler logs
# Place in /etc/logrotate.d/caddy-sites

/var/log/caddy/*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 0644 caddy caddy
    sharedscripts
    postrotate
        systemctl reload caddy > /dev/null 2>&1 || true
    endscript
}

# Form handler logs - keep for 5 years (1826 days) per company retention policy
/var/log/forms/*/*.log {
    daily
    missingok
    rotate 1826
    compress
    delaycompress
    notifempty
    create 0644 www-data www-data
    # No service restart needed for form logs
}

# Server monitoring logs
/var/log/server-monitor.log {
    weekly
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    create 0644 root root
}
